# Design File Format

This document describes the design file format for manually creating skill designs that build-with-patterns can read.

---

## Table of Contents

- [Overview](#overview) - Lines 21-30
- [Required Structure](#required-structure) - Lines 32-75
- [Optional Sections](#optional-sections) - Lines 77-150
- [Section Details](#section-details) - Lines 152-270
- [Examples](#examples) - Lines 272-435
- [Format Variations](#format-variations) - Lines 437-485
- [Tips for Creating Design Files](#tips-for-creating-design-files) - Lines 487-500
- [Comparison with assess-skill-value](#comparison-with-assess-skill-value) - Lines 502-520
- [Quick Start](#quick-start) - Lines 522-550

---

## Overview

**Design files are markdown documents that specify what to build.**

They can be:
- Generated by assess-skill-value (evaluated and validated)
- Created manually by users (for direct use with build-with-patterns)

**Format:** Pure markdown with structured sections

**Extension:** `.skill-design.md`

**Naming:** `{skill-name}.skill-design.md`

---

## Required Structure

### Minimal Valid Design File

```markdown
# Skill Design: my-skill

## Specification

### Goal
Create a skill that does X.

### Happy Path Example

**Input:**
    user_input: "some data"

**Output:**
    OUTPUT.md with processed results

**Success criteria:**
- Output is well-formed
- All required sections present

### Artifact Contract

**Filename:** `OUTPUT.md`
**Format:** markdown
**Required sections:** Title, Body
**Validation:** Non-empty

### User Inputs

**Required:**
- `input_name` (string): description

**Optional:**
- `option` (string, default: "value"): description
```

**That's all you need!**

build-with-patterns will extract:
- Goal: "Create a skill that does X"
- Example: Input, Output, Success criteria
- Contract: Filename, Format, Sections, Validation
- Inputs: Required and optional parameters

---

## Optional Sections

### Metadata (Optional)

If generated by assess-skill-value, files include metadata:

```markdown
# Skill Design: my-skill

**Created by:** assess-skill-value v2.0
**Created at:** 2026-02-03T14:23:01Z
**Total Score:** 12/14
**Verdict:** Build
```

This is informational only. build-with-patterns doesn't require it.

### Evaluation Summary (Optional)

Context about why this design is valuable:

```markdown
## Evaluation Summary

This skill [description of what it does and why it matters].

**Key capabilities:**
- Capability 1
- Capability 2

**Strategic value:**
- Value proposition 1
- Value proposition 2
```

build-with-patterns ignores this section (it's for human context).

### Additional Specification Sections (Optional)

```markdown
### Constraints

**Quality constraints:**
- Constraint 1
- Constraint 2

**Format constraints:**
- Constraint 3

### Non-Goals

**This skill does NOT:**
- Non-goal 1
- Non-goal 2

### Tools & Dependencies

**Required:**
- **Tool Name**
  - Purpose: What it's for
  - Functions used: Specific functions
  - Error handling: What to do if unavailable

### Edge Cases

**Case 1:**
- Description of edge case
- Expected behavior

**Case 2:**
- Description of edge case
- Expected behavior
```

build-with-patterns uses these as guidance during implementation.

---

## Section Details

### Goal

**What it is:** 1-3 sentences describing what the skill does

**Examples:**
```markdown
### Goal
Create study sheets from lecture notes with quality validation.
```

```markdown
### Goal
Generate morning routines based on user goals, available time, and energy levels.
```

**Tips:**
- Be specific about what it does
- Include key features if any
- Keep it concise (1-3 sentences)

### Happy Path Example

**What it is:** ONE concrete example showing Input → Output → Success

**Structure:**
```markdown
### Happy Path Example

**Input:**
    parameter1: "value"
    parameter2: 123

**Process:** Step 1 → Step 2 → Step 3

**Output:**
    FILE.md with sections

**Success criteria:**
- Criterion 1
- Criterion 2
```

**Tips:**
- Use real, concrete values (not placeholders)
- Show the complete workflow
- Define what "success" looks like
- Keep it simple (one happy path, not edge cases)

### Artifact Contract

**What it is:** Specification of what files/output the skill produces

**Structure:**
```markdown
### Artifact Contract

**Filename:** `OUTPUT.md`

**Format:** markdown

**Required sections:**
- Section 1 - Description
- Section 2 - Description

**Forbidden sections:**
- Section A (why it's forbidden)
- Section B (why it's forbidden)

**Format rules:**
- Rule 1
- Rule 2

**Validation criteria:**
- Check 1
- Check 2
```

**Tips:**
- Specify filename and format
- List required sections
- Note any forbidden sections (prevents bloat)
- Include validation rules if quality matters

### User Inputs

**What it is:** Parameters the skill accepts from users

**Structure:**
```markdown
### User Inputs

**Required:**
- `input1` (type): description
- `input2` (type): description

**Optional:**
- `option1` (type, default: "value"): description
- `option2` (type, default: 100): description

**Validation:**
- input1 must be non-empty
- input2 must be positive integer

**Missing input handling:**
- If input1 missing → ask user to provide
- If option1 not provided → use default
```

**Tips:**
- Separate required from optional
- Include types (string, integer, enum, etc.)
- Specify defaults for optional inputs
- Note validation rules

---

## Examples

### Example 1: Simple Skill

```markdown
# Skill Design: todo-sorter

## Specification

### Goal
Sort TODO items by priority and estimated effort.

### Happy Path Example

**Input:**
    todos: ["Write docs", "Fix bug", "Review PR"]
    priorities: [2, 1, 2]
    efforts: [60, 15, 30]

**Process:** Parse inputs → Calculate score → Sort by score → Format output

**Output:**
    SORTED_TODOS.md with prioritized list

**Success criteria:**
- Items sorted by priority first, then effort
- All input items present in output

### Artifact Contract

**Filename:** `SORTED_TODOS.md`
**Format:** Markdown
**Required sections:** Prioritized list (numbered)
**Validation:** Item count matches input count

### User Inputs

**Required:**
- `todos` (list): TODO item descriptions
- `priorities` (list): Priority values (1=high, 2=medium, 3=low)

**Optional:**
- `efforts` (list, default: []): Estimated minutes per item
```

### Example 2: Skill with Tools

```markdown
# Skill Design: note-linker

## Specification

### Goal
Find and insert links between related notes in Joplin based on keyword matching.

### Happy Path Example

**Input:**
    note_id: "abc123"
    min_matches: 3

**Process:** Read note → Extract keywords → Search other notes → Find matches → Insert links

**Output:**
    Original note updated with "Related Notes" section

**Success criteria:**
- Related Notes section added
- At least min_matches links inserted
- Links are valid Joplin URLs

### Artifact Contract

**Filename:** Updated note in Joplin
**Format:** Markdown
**Required sections:** Related Notes (H2 heading with bullet list)
**Validation:** All links valid, minimum match count met

### User Inputs

**Required:**
- `note_id` (string): Joplin note ID to process

**Optional:**
- `min_matches` (integer, default: 3): Minimum keyword matches to link
- `max_links` (integer, default: 10): Maximum links to insert

### Tools & Dependencies

**Required:**
- **Joplin MCP server**
  - Purpose: Read and update notes
  - Functions: `get_note`, `save_note`, `search_notes`
  - Error handling: Show clear error if unavailable

### Edge Cases

**No matches found:**
- Don't add Related Notes section
- Show warning to user

**Note not found:**
- Show error with note ID
- Ask user to verify ID
```

### Example 3: Skill with Constraints

```markdown
# Skill Design: haiku-generator

## Specification

### Goal
Generate haiku poems from user topics with strict syllable validation.

### Happy Path Example

**Input:**
    topic: "autumn leaves"

**Process:** Generate three lines → Validate syllables (5-7-5) → Format output

**Output:**
    HAIKU.md with formatted poem

**Success criteria:**
- Three lines present
- Syllable count: 5-7-5 (strict)
- Topic incorporated

### Artifact Contract

**Filename:** `HAIKU.md`
**Format:** Markdown
**Required sections:** Title, three lines (centered)
**Validation:** Syllable count must be 5-7-5 (strict)

### User Inputs

**Required:**
- `topic` (string): Subject for the haiku

**Optional:**
- `tone` (enum["peaceful", "energetic", "melancholy"], default: "peaceful"): Emotional tone

### Constraints

**Strict format constraints:**
- Line 1: exactly 5 syllables
- Line 2: exactly 7 syllables
- Line 3: exactly 5 syllables
- Validation must pass before delivery

**Tone constraints:**
- Must match selected tone
- No mixing of tones

### Non-Goals

**This skill does NOT:**
- Generate other poetry forms (only haiku)
- Accept pre-written lines (generates new content)
- Support languages other than English
```

---

## Format Variations

**build-with-patterns is forgiving about format variations.**

These all work:

**Heading variations:**
```markdown
### Goal
Create a skill...

### Goal:
Create a skill...

###Goal
Create a skill...
```

**List variations:**
```markdown
**Required:**
- input1
- input2

**Required**
- input1
- input2

Required:
• input1
• input2
```

**Indentation variations:**
```markdown
**Input:**
    value: "data"

**Input:**
value: "data"

**Input:** value: "data"
```

**build-with-patterns extracts content regardless of minor formatting differences.**

---

## Tips for Creating Design Files

1. **Start minimal** - Include only required sections (Goal, Example, Contract, Inputs)
2. **Use concrete examples** - Real values, not placeholders
3. **Be specific** - Clear success criteria, explicit validation rules
4. **Add optional sections as needed** - Constraints, Non-Goals, Tools, Edge Cases
5. **Don't worry about perfect formatting** - build-with-patterns is forgiving

**If build-with-patterns can't extract something:**
- It will show what it found
- Ask for clarification
- Offer to switch to interactive mode

---

## Comparison with assess-skill-value

**Design files from assess-skill-value:**
- Include metadata (Created by, Score, Verdict)
- Include Evaluation Summary (why it's valuable)
- Strictly validated before saving
- Integrated specification (features merged)

**Manual design files:**
- No metadata required
- No Evaluation Summary needed
- Just the Specification section
- Minimal but complete

**Both work with build-with-patterns!**

---

## Quick Start

1. Copy the minimal template:
```markdown
# Skill Design: my-skill

## Specification

### Goal
[What it does]

### Happy Path Example
**Input:** [parameters]
**Output:** [result]
**Success criteria:** [checklist]

### Artifact Contract
**Filename:** `OUTPUT.md`
**Format:** markdown
**Required sections:** [list]
**Validation:** [rules]

### User Inputs
**Required:** [list]
**Optional:** [list]
```

2. Fill in the details
3. Save as `my-skill.skill-design.md`
4. Run: `build-with-patterns --from-design my-skill.skill-design.md`

**Done!**
